<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/569ce4b8f30dc480-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/93f479601ee12b01-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/2c42acc71327936e.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-b35b1857bf38ffc8.js"/><script src="/_next/static/chunks/4bd1b696-2bfa57da125389e3.js" async=""></script><script src="/_next/static/chunks/587-c7f2815ecf19825a.js" async=""></script><script src="/_next/static/chunks/main-app-f803f0036d3a6c59.js" async=""></script><script src="/_next/static/chunks/app/posts/%5Bslug%5D/page-a41ebe43e93e6584.js" async=""></script><meta name="next-size-adjust" content=""/><title>My Blog</title><meta name="description" content="Sandy&#x27;s Blog"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__variable_4d318d __variable_ea5f4b antialiased"><div class="mx-auto flex min-h-screen max-w-screen-xl flex-col px-4 sm:px-6 md:px-8 lg:px-12"><header class="container mx-auto max-w-screen-md p-4"><a href="/">Hello, World</a></header><main class="container mx-auto max-w-screen-md flex-1 p-4"><section class="flex h-full w-full flex-wrap rounded-lg bg-gray-200 p-5"><article class="flex w-full flex-wrap pb-5"><div class="flex flex-1 flex-wrap gap-2"><h3 class="text-lg font-semibold text-gray-800">TDD에서의 Jest</h3><p class="ml-auto text-sm text-gray-800">2025-03-23 23:55:00</p></div></article><article class="prose flex w-full flex-wrap text-gray-800"><h5 class="text-lg font-normal text-gray-800">시작하기</h5>
<p>지난번 글과 이어서 Jest에 대한 궁금증을 해결해보자.</p>
<p>우리 프로젝트에서 Jest 를 사용하고 있는 요즘 너무 느려진 테스트를 느낄 수 있었다.</p>
<p>이것을 해결해 나가기 위해 조금 노력을 해볼까..?</p>
<h3 class="text-2xl font-medium text-red-500">Jest</h3>
<p>켄트.c.도즈의 <a href="https://kentcdodds.com/blog/common-mistakes-with-react-testing-library">Common mistakes with React Testing Library</a></p>
<p>기초적인 것 부터 가보자아. 여기 글에서 아직까지도 내가 사용하고 있지 않은 부분들도 있었다.
몇 개만 간추려보면,</p>
<h5 class="text-lg font-normal text-gray-800">Using waitFor to wait for elements that can be queried with find*</h5>
<p>findByRole은 waitFor 없이도 비동기적으로 동작하기 때문에, waitFor를 쓰지 않아도 된다.</p>
<pre><code class="language-js">// ❌
const submitButton = await waitFor(() =&gt;
  screen.getByRole(&#x27;button&#x27;, { name: /submit/i }),
)

// ✅
const submitButton = await screen.findByRole(&#x27;button&#x27;, { name: /submit/i })
</code></pre>
<h5 class="text-lg font-normal text-gray-800">Having multiple assertions in a single waitFor callback</h5>
<p>각 waitFor는 하나의 UI 상태 변화에만 집중해서, 그 상태가 완전히 변할 때까지 기다리고 그 후에 검증을 수행하는 것이 파악하기 쉽다.</p>
<pre><code class="language-js">// ❌
await waitFor(() =&gt; {
  expect(window.fetch).toHaveBeenCalledWith(&#x27;foo&#x27;)
  expect(window.fetch).toHaveBeenCalledTimes(1)
})

// ✅
await waitFor(() =&gt; expect(window.fetch).toHaveBeenCalledWith(&#x27;foo&#x27;))
expect(window.fetch).toHaveBeenCalledTimes(1)
</code></pre>
<h5 class="text-lg font-normal text-gray-800">act</h5>
<p><a href="https://kentcdodds.com/blog/fix-the-not-wrapped-in-act-warning">Fix the &quot;not wrapped in act(...)&quot; warning</a></p>
<hr/>
<h3 class="text-2xl font-medium text-red-500">Describe / it(test)</h3>
<p><code>beforeAll</code>
<code>beforeEach</code>
<code>describe</code>
<code>it</code>
<code>afterEach</code>
<code>afterAll</code></p></article></section></main><footer class="flex h-10 w-full flex-col items-center justify-center"><span class="text-xs">Copyright © <!-- -->2025<!-- --> Sandy</span></footer></div><script src="/_next/static/chunks/webpack-b35b1857bf38ffc8.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[8173,[\"858\",\"static/chunks/app/posts/%5Bslug%5D/page-a41ebe43e93e6584.js\"],\"\"]\n4:I[5244,[],\"\"]\n5:I[3866,[],\"\"]\n7:I[6213,[],\"OutletBoundary\"]\na:I[6213,[],\"ViewportBoundary\"]\nc:I[6213,[],\"MetadataBoundary\"]\ne:I[4835,[],\"\"]\n:HL[\"/_next/static/media/569ce4b8f30dc480-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/93f479601ee12b01-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/2c42acc71327936e.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"1mNPG14sdWmYNAC9O3TYh\",\"p\":\"\",\"c\":[\"\",\"posts\",\"04_Jest\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"04_Jest\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/2c42acc71327936e.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"__variable_4d318d __variable_ea5f4b antialiased\",\"children\":[\"$\",\"div\",null,{\"className\":\"mx-auto flex min-h-screen max-w-screen-xl flex-col px-4 sm:px-6 md:px-8 lg:px-12\",\"children\":[[\"$\",\"header\",null,{\"className\":\"container mx-auto max-w-screen-md p-4\",\"children\":[\"$\",\"$L2\",null,{\"href\":\"/\",\"children\":\"Hello, World\"}]}],\"$L3\",[\"$\",\"footer\",null,{\"className\":\"flex h-10 w-full flex-col items-center justify-center\",\"children\":[\"$\",\"span\",null,{\"className\":\"text-xs\",\"children\":[\"Copyright © \",2025,\" Sandy\"]}]}]]}]}]}]]}],{\"children\":[\"posts\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"04_Jest\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L6\",\"$undefined\",null,[\"$\",\"$L7\",null,{\"children\":[\"$L8\",\"$L9\",null]}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"arDmPy5f1nzLdFjTvci2B\",{\"children\":[[\"$\",\"$La\",null,{\"children\":\"$Lb\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],[\"$\",\"$Lc\",null,{\"children\":\"$Ld\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$e\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"3:[\"$\",\"main\",null,{\"className\":\"container mx-auto max-w-screen-md flex-1 p-4\",\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"$undefined\",[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n8:null\n"])</script><script>self.__next_f.push([1,"9:null\nd:[[\"$\",\"title\",\"0\",{\"children\":\"My Blog\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Sandy's Blog\"}]]\n"])</script><script>self.__next_f.push([1,"6:[\"$\",\"section\",null,{\"className\":\"flex h-full w-full flex-wrap rounded-lg bg-gray-200 p-5\",\"children\":[[\"$\",\"article\",null,{\"className\":\"flex w-full flex-wrap pb-5\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex flex-1 flex-wrap gap-2\",\"children\":[[\"$\",\"h3\",null,{\"className\":\"text-lg font-semibold text-gray-800\",\"children\":\"TDD에서의 Jest\"}],[\"$\",\"p\",null,{\"className\":\"ml-auto text-sm text-gray-800\",\"children\":\"2025-03-23 23:55:00\"}]]}]}],[\"$\",\"article\",null,{\"className\":\"prose flex w-full flex-wrap text-gray-800\",\"children\":\"$Lf\"}]]}]\n"])</script><script>self.__next_f.push([1,"f:[[\"$\",\"h5\",null,{\"className\":\"text-lg font-normal text-gray-800\",\"children\":\"시작하기\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"지난번 글과 이어서 Jest에 대한 궁금증을 해결해보자.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"우리 프로젝트에서 Jest 를 사용하고 있는 요즘 너무 느려진 테스트를 느낄 수 있었다.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"이것을 해결해 나가기 위해 조금 노력을 해볼까..?\"}],\"\\n\",[\"$\",\"h3\",null,{\"className\":\"text-2xl font-medium text-red-500\",\"children\":\"Jest\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"켄트.c.도즈의 \",[\"$\",\"a\",null,{\"href\":\"https://kentcdodds.com/blog/common-mistakes-with-react-testing-library\",\"children\":\"Common mistakes with React Testing Library\"}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"기초적인 것 부터 가보자아. 여기 글에서 아직까지도 내가 사용하고 있지 않은 부분들도 있었다.\\n몇 개만 간추려보면,\"}],\"\\n\",[\"$\",\"h5\",null,{\"className\":\"text-lg font-normal text-gray-800\",\"children\":\"Using waitFor to wait for elements that can be queried with find*\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"findByRole은 waitFor 없이도 비동기적으로 동작하기 때문에, waitFor를 쓰지 않아도 된다.\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-js\",\"children\":\"// ❌\\nconst submitButton = await waitFor(() =\u003e\\n  screen.getByRole('button', { name: /submit/i }),\\n)\\n\\n// ✅\\nconst submitButton = await screen.findByRole('button', { name: /submit/i })\\n\"}]}],\"\\n\",[\"$\",\"h5\",null,{\"className\":\"text-lg font-normal text-gray-800\",\"children\":\"Having multiple assertions in a single waitFor callback\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"각 waitFor는 하나의 UI 상태 변화에만 집중해서, 그 상태가 완전히 변할 때까지 기다리고 그 후에 검증을 수행하는 것이 파악하기 쉽다.\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-js\",\"children\":\"// ❌\\nawait waitFor(() =\u003e {\\n  expect(window.fetch).toHaveBeenCalledWith('foo')\\n  expect(window.fetch).toHaveBeenCalledTimes(1)\\n})\\n\\n// ✅\\nawait waitFor(() =\u003e expect(window.fetch).toHaveBeenCalledWith('foo'))\\nexpect(window.fetch).toHaveBeenCalledTimes(1)\\n\"}]}],\"\\n\",[\"$\",\"h5\",null,{\"className\":\"text-lg font-normal text-gray-800\",\"children\":\"act\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://kentcdodds.com/blog/fix-the-not-wrapped-in-act-warning\",\"children\":\"Fix the \\\"not wrapped in act(...)\\\" warning\"}]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h3\",null,{\"className\":\"text-2xl font-medium text-red-500\",\"children\":\"Describe / it(test)\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"beforeAll\"}],\"\\n\",[\"$\",\"code\",null,{\"children\":\"beforeEach\"}],\"\\n\",[\"$\",\"code\",null,{\"children\":\"describe\"}],\"\\n\",[\"$\",\"code\",null,{\"children\":\"it\"}],\"\\n\",[\"$\",\"code\",null,{\"children\":\"afterEach\"}],\"\\n\",[\"$\",\"code\",null,{\"children\":\"afterAll\"}]]}]]\n"])</script></body></html>